# Чат сервер на C++
Сервер чатов типа server-client, написан на C++ с использованием бибилиотеки boost

English:

Chat server/client between two participant implemented on C++

## ТЗ
Реализовать простейший консольный чат между двумя клиентами. 

Первый запущенный клиент берет на себя роль “мастера”, второй клиент подключается к нему. 

Нужно уметь сохранять историю чата и показывать ее обоим клиентам при установлении нового соединения.


## Установка
```(Bash)
sudo apt install libboost-dev libboost-system-dev libboost-thread-dev 

mkdir build
cd build
cmake ..
make
```

### disclaimer
Протестировано на archlinux, boost-libs 1.75.0-2.
На старых версиях ubuntu могут быть проблемы с совместимостью C++17 и дефолтным boost из репозитория

## Запуск
### Сервер
```(bash)
./apps/chat_server server 4242
```
Взаимодействие:

При старте печатается история чата, если таковая уже есть (она сохраняется на диск в файл `server_history.pb.txt`)

Сообщение считывается до перевода строки, такжеподдерживаются следующие команды:
* /shutdown

### Клиент
```(bash)
./apps/chat_client ulyanin localhost 4242
```
Взаимодействие:

После коннекта к серверу, он присылает историю чата (если она есть), которая печатается на экране

Сообщение считывается до перевода строки, такжеподдерживаются следующие команды:
* /shutdown


### Пример
#### Сервер
```bash
./apps/chat_server server 4242           
Привет, я сервер
+------------------------------------------------------------------------------+
| from: server
| content:
| Привет, я сервер
+------------------------------------------------------------------------------+
+------------------------------------------------------------------------------+
| from: ulyanin
| content:
| Привет, а я клиент
+------------------------------------------------------------------------------+
+------------------------------------------------------------------------------+
| from: ulyanin
| content:
| Пока
+------------------------------------------------------------------------------+
Пока
+------------------------------------------------------------------------------+
| from: server
| content:
| Пока
+------------------------------------------------------------------------------+
/shutdown
history saved to server_history.pb.txt
```
#### Клиент
```bash
./apps/chat_client ulyanin localhost 4242
+------------------------------------------------------------------------------+
| from: server
| content:
| Привет, я сервер
+------------------------------------------------------------------------------+
Привет, а я клиент
+------------------------------------------------------------------------------+
| from: ulyanin
| content:
| Привет, а я клиент
+------------------------------------------------------------------------------+
Пока
+------------------------------------------------------------------------------+
| from: ulyanin
| content:
| Пока
+------------------------------------------------------------------------------+
/shutdown

```